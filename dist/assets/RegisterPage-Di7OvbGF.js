import{_ as b,r as l,c as v,a,b as y,w as i,v as c,t as h,e as _,g as R,f as q,h as f,i as x,u as E,j as V,q as C,k as D,l as P,o as m}from"./index-DXTcdSJ3.js";const T={class:"container"},B={key:0,class:"error"},S={key:1,class:"error"},N={__name:"RegisterPage",setup(A){const o=l(""),d=l(""),u=l(""),p=l(""),n=l(""),r=l(""),g=E(),w=async()=>{const t=V(f,"users"),e=C(t,D("username","==",u.value));return(await P(e)).empty},k=async()=>{if(n.value="",r.value="",!await w()){n.value="Username already taken!";return}try{const e=(await _(R(),o.value,d.value)).user,s=q(f,"users",e.uid);await x(s,{uid:e.uid,username:u.value,email:o.value,savingTarget:parseFloat(p.value),role:"User"}),alert("User registered successfully!"),g.push("/home")}catch(t){t.code==="auth/email-already-in-use"?r.value="Email already registered!":t.code==="auth/invalid-email"?r.value="Invalid email format!":t.code==="auth/weak-password"?r.value="Password should be at least 6 characters!":console.error(t.code,t.message)}},U=()=>{g.push("/")};return(t,e)=>(m(),v("div",T,[e[4]||(e[4]=a("h1",null,"Register as a Normal User",-1)),a("p",null,[i(a("input",{type:"text",placeholder:"Username","onUpdate:modelValue":e[0]||(e[0]=s=>u.value=s)},null,512),[[c,u.value]])]),n.value?(m(),v("p",B,h(n.value),1)):y("",!0),a("p",null,[i(a("input",{type:"text",placeholder:"Email","onUpdate:modelValue":e[1]||(e[1]=s=>o.value=s)},null,512),[[c,o.value]])]),r.value?(m(),v("p",S,h(r.value),1)):y("",!0),a("p",null,[i(a("input",{type:"password",placeholder:"Password","onUpdate:modelValue":e[2]||(e[2]=s=>d.value=s)},null,512),[[c,d.value]])]),a("p",null,[i(a("input",{type:"number",placeholder:"Monthly Saving Target","onUpdate:modelValue":e[3]||(e[3]=s=>p.value=s)},null,512),[[c,p.value]])]),a("p",null,[a("button",{onClick:k},"Register"),a("button",{class:"back-btn",onClick:U},"Back to Login")])]))}},L=b(N,[["__scopeId","data-v-33b4027b"]]);export{L as default};
